<body></body>
<script>
const elementTree = document.createElement("template");
elementTree.innerHTML = `
    <style>
        :host {display: block;}
        ::slotted(*) {padding-left:10px;}
    </style>
    <div></div>
    <slot></slot>`;

class MyTree extends HTMLElement {
    connectedCallback() {
        this.attachShadow({mode: "open"});
        this.shadowRoot.append(elementTree.content.cloneNode(true));
        this.shadowRoot.querySelector("div").textContent = `<my-tree id=${this.id}>`;
    }
}


class MyLeaf extends HTMLElement {
    connectedCallback() {
        this.attachShadow({mode: "open"});
        this.shadowRoot.append(elementTree.content.cloneNode(true));
        this.shadowRoot.querySelector("div").textContent = `<my-leaf id=${this.id}>`;
    }
}

customElements.define("my-tree", MyTree);
customElements.define("my-leaf", MyLeaf);


const obj = {
    id: 1,
    items: [{
      id: 2,
      items: [
          { id: 3},
          { id: 4}
      ]
    }]
  }


function buildTree( tree, parent ) {
    for ( const { id, items } of tree ) {
        
        if ( items == undefined ) {

            const myLeaf = document.createElement("my-leaf");
            myLeaf.id = id;
            parent.appendChild( myLeaf );
        } else {
    
            const myTree = document.createElement("my-tree");
            myTree.id = id;
            parent.appendChild( myTree );
            buildTree( items, myTree );
        }
    }
}

buildTree( [obj], document.body);
</script>